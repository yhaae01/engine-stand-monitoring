<div class="container px-6 pt-28 pb-6 mx-auto">
  <div class="block p-6 rounded-lg shadow-lg bg-white">
    <div class="flex justify-between">
      <button
        type="button"
        routerLink="/report-hazard"
        class="flex items-center px-5 py-2 border-2 mb-3 border-blue-600 text-blue-600 font-medium text-md leading-tight rounded hover:bg-black hover:bg-opacity-5 focus:outline-none focus:ring-0 transition duration-150 ease-in-out"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 mr-1"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15 19l-7-7 7-7"
          />
        </svg>
        Back
      </button>
      <h1 class="text-2xl font-bold" style="margin-left: -100px">
        Detail Report Hazard
      </h1>
      <div></div>
    </div>

    <form [formGroup]="DetailHazardForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Image -->
      <div class="flex justify-center items-center mb-6">
        <div class="flex flex-wrap justify-center">
          <img
            [src]="imageData"
            (error)="defaultPhoto($event)"
            class="p-1 bg-white border rounded max-w-xs"
            alt="..."
          />
        </div>
      </div>

      <!-- Tabs -->
      <ul
        class="nav nav-tabs flex flex-col md:flex-row flex-wrap list-none border-b-0 pl-0 mb-4"
        id="tabs-tab"
        role="tablist"
      >
        <!-- List Tabs -->
        <li class="nav-item" role="presentation">
          <a
            href="#general-information"
            class="nav-link block font-medium text-md leading-tight border-x-0 border-t-0 border-b-2 border-transparent px-6 py-3 my-2 hover:border-transparent hover:bg-gray-100 focus:border-transparent active"
            id="general-information-tab"
            data-bs-toggle="pill"
            data-bs-target="#general-information"
            role="tab"
            aria-controls="general-information"
            aria-selected="true"
            >General Information</a
          >
        </li>
        <li class="nav-item" role="presentation">
          <a
            href="#remedy-hazard"
            class="nav-link block font-medium text-md leading-tight border-x-0 border-t-0 border-b-2 border-transparent px-6 py-3 my-2 hover:border-transparent hover:bg-gray-100 focus:border-transparent"
            id="remedy-hazard-tab"
            data-bs-toggle="pill"
            data-bs-target="#remedy-hazard"
            role="tab"
            aria-controls="remedy-hazard"
            aria-selected="false"
            >Rectification / Remedy Hazard</a
          >
        </li>
      </ul>

      <!-- Content Tabs -->
      <div class="tab-content" id="tabs-tabContent">
        <!-- Form General Information -->
        <div
          class="tab-pane fade show active"
          id="general-information"
          role="tabpanel"
          aria-labelledby="general-information-tab"
        >
          <div class="grid grid-cols-2 gap-4">
            <!-- Row 1 -->
            <div class="form-group">
              <label for="">Serial Number</label>
              <ng-select
                id="equipment_id"
                name="equipment_id"
                formControlName="equipment_id"
                [items]="inventoryData"
                bindLabel="serialNumber"
                bindValue="equipmentId"
              >
              </ng-select>
            </div>
            <div class="form-group">
              <label for="">Category Hazard</label>
              <ng-select
                id="category"
                name="category"
                formControlName="category"
                [items]="categoryData"
                bindLabel="categoryName"
                bindValue="categoryId"
              >
              </ng-select>
            </div>
          </div>

          <!-- Row 2 -->
          <div class="form-group my-3">
            <label for="">Notes</label>
            <textarea
              class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              rows="3"
              formControlName="notes"
              value="{{ detailReportHazard?.notes }}"
            ></textarea>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <!-- Row 3 -->
            <div class="form-group">
              <label for="">Description</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.description }}"
                disabled
                class="form-control uppercase block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
            <div class="form-group">
              <label for="">Engine/APU Type</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.type.typeName }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>

            <!-- Row 4 -->
            <div class="form-group">
              <label for="">Aircraft Type</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.aircraftType.acType }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
            <div class="form-group">
              <label for="">Part Number</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.partNumber }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>

            <!-- Row 5 -->
            <div class="form-group">
              <label for="">Model</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.model }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
            <div class="form-group">
              <label for="">Manufacture</label>
              <input
                type="text"
                value="{{
                  detailReportHazard?.equipment.manufacture.manufactureName
                }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>

            <!-- Row 6 -->
            <div class="form-group">
              <label for="">Storage Location</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.storageLocation }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
            <div class="form-group">
              <label for="">Owner</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.owner.ownerName }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>

            <!-- Row 7 -->
            <div class="form-group">
              <label for="">Due Date</label>
              <input
                type="text"
                value="{{
                  detailReportHazard?.equipment.pmiData[0].nextPmiDueDate
                    | dfnsParseIso
                    | dfnsFormat : 'dd-LLL-yyyy'
                }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
            <div class="form-group">
              <label for="">Date Manufacture</label>
              <input
                type="text"
                value="{{
                  detailReportHazard?.equipment.manufactureDate
                    | dfnsParseIso
                    | dfnsFormat : 'dd-LLL-yyyy'
                }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>

            <!-- Row 8 -->
            <div class="form-group">
              <label for="">Inventory Number</label>
              <input
                type="text"
                value="{{ detailReportHazard?.equipment.inventoryNumber }}"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
            <div class="form-group">
              <label for="">Status</label>
              <input
                *ngIf="detailReportHazard?.equipment.status == 1"
                value="Incoming"
                type="text"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
              <input
                *ngIf="detailReportHazard?.equipment.status == 2"
                value="Outgoing"
                type="text"
                disabled
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-gray-100 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              />
            </div>
          </div>
        </div>
        <!-- Form Rectification / Remedy Hazard -->
        <div
          class="tab-pane fade"
          id="remedy-hazard"
          role="tabpanel"
          aria-labelledby="remedy-hazard-tab"
        >
          <div class="grid lg:grid-cols-2 lg:gap-4">
            <!-- Row 1 -->
            <div class="form-group">
              <label for="">Category Rectification</label>
              <select
                id="rectification_id"
                name="rectification_id"
                formControlName="rectification_id"
                class="form-select appearance-none block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              >
                <option value="" selected>Select Category Rectification</option>
                <option
                  *ngFor="let rectifications of rectificationData"
                  [ngValue]="rectifications.rectificationId"
                  [selected]="
                    detailReportHazard?.rectification?.rectificationId ==
                    rectifications.rectificationId
                  "
                >
                  {{ rectifications.rectificationName }}
                </option>
              </select>
              <div
                *ngIf="
                  !rectification_id?.valid &&
                  (rectification_id?.dirty || rectification_id?.touched)
                "
              >
                <small
                  class="text-red-800"
                  [hidden]="!rectification_id.errors.required"
                >
                  Category Rectification is required
                </small>
              </div>
            </div>
            <div class="form-group">
              <label for="">Rectification / Remedy Date</label>
              <input
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                formControlName="remedy"
                value="{{ detailReportHazard?.remedy }}"
                type="date"
              />
            </div>
          </div>

          <!-- Row 2 -->
          <div class="form-group my-3">
            <label for="">Response / Reason</label>
            <textarea
              class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              formControlName="reason"
              value="{{ detailReportHazard?.reason }}"
              rows="3"
            ></textarea>
          </div>

          <!-- Row 3 -->
          <div class="grid lg:grid-cols-2 lg:gap-4">
            <div class="form-group">
              <label for="">Attachment Rectification / Remedy Link</label>
              <input
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                value="{{ detailReportHazard?.link }}"
                formControlName="link"
                type="text"
              />
            </div>
            <div class="form-group">
              <label for="">Remark</label>
              <input
                class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                value="{{ detailReportHazard?.remark }}"
                formControlName="remark"
                type="text"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-center mt-6">
        <button
          *ngIf="detailReportHazard?.rectificationId == null"
          type="submit"
          class="mb-2 w-1/4 inline-block px-6 py-2.5 mr-2 bg-yellow-500 text-white font-medium text-md leading-normal rounded shadow-md hover:bg-yellow-600 hover:shadow-lg focus:bg-yellow-600 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-yellow-800 active:shadow-lg transition duration-150 ease-in-out"
        >
          Edit
        </button>
        <button
          *ngIf="
            detailReportHazard?.createdBy != userInfo.personalNumber &&
            detailReportHazard?.rectificationId == null
          "
          data-bs-target="#ModalRectificationReportHazard"
          data-bs-toggle="modal"
          type="button"
          class="mb-2 w-1/4 mx-3 inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-md leading-normal rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"
        >
          Proposed to Rectification
        </button>
        <button
          *ngIf="detailReportHazard?.isClosed == 0"
          (click)="closeHazard()"
          type="button"
          class="mb-2 w-1/4 inline-block px-6 py-2.5 bg-red-600 text-white font-medium text-md leading-normal rounded shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg transition duration-150 ease-in-out"
        >
          Close
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal -->
<div
  *ngIf="detailReportHazard?.createdBy != userInfo.personalNumber"
  class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto"
  id="ModalRectificationReportHazard"
  tabindex="-1"
  aria-labelledby="ModalRectificationReportHazardLabel"
  aria-hidden="true"
  aria-modal="true"
  role="dialog"
  data-bs-backdrop="static"
>
  <div class="modal-dialog relative w-auto pointer-events-none">
    <div
      class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current"
    >
      <div
        class="modal-header flex flex-shrink-0 items-center justify-center p-4 border-b border-gray-200 rounded-t-md"
      >
        <h5
          class="text-xl font-medium leading-normal text-gray-800"
          id="ModalRectificationReportHazardLabel"
        >
          Rectification / Remedy Form
        </h5>
        <button
          type="button"
          class="btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form
        [formGroup]="ProposedHazardForm"
        (ngSubmit)="onSubmitProposed()"
        novalidate
      >
        <div class="modal-body relative p-4">
          <div class="form-group mb-3">
            <label for="">Category Rectification</label>
            <ng-select
              id="rectification_id"
              name="rectification_id"
              formControlName="rectification_id"
              class="form-select appearance-none block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
            >
              <ng-option value="" selected
                >Select Category Rectification</ng-option
              >
              <ng-option
                *ngFor="let rectifications of rectificationData"
                value="{{ rectifications.rectificationId }}"
              >
                {{ rectifications.rectificationName }}
              </ng-option>
            </ng-select>
          </div>
          <div class="form-group mb-3">
            <label for="">Response / Reason</label>
            <textarea
              class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              formControlName="reason"
              rows="3"
              placeholder="Please fill this..."
            ></textarea>
          </div>
          <div class="form-group mb-3">
            <label for="">Rectification / Remedy Date</label>
            <input
              formControlName="remedy"
              type="date"
              class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
            />
          </div>
          <div class="form-group mb-3">
            <label for="">Attachment</label>
            <input
              formControlName="link"
              type="text"
              placeholder="External Link...."
              class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
            />
          </div>
          <div class="form-group mb-3">
            <label for="">Remark</label>
            <input
              formControlName="remark"
              type="text"
              class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
            />
          </div>
        </div>
        <div
          class="modal-footer flex flex-shrink-0 flex-wrap items-center justify-center p-4 border-t border-gray-200 rounded-b-md"
        >
          <button
            type="button"
            class="px-6 py-2.5 w-1/4 bg-gray-600 text-white font-medium text-md leading-tight rounded shadow-md hover:bg-gray-700 hover:shadow-lg focus:bg-gray-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-gray-800 active:shadow-lg transition duration-150 ease-in-out"
            data-bs-dismiss="modal"
          >
            Close
          </button>
          <button
            data-bs-dismiss="modal"
            type="submit"
            class="px-6 py-2.5 w-1/4 bg-blue-600 text-white font-medium text-md leading-tight rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out ml-1"
          >
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
